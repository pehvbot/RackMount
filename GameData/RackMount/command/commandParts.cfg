//prepare command parts for rackmounting
@PART[*]:HAS[@MODULE[ModuleCommand],!MODULE[ModuleRackMountPart],!MODULE[KerbalEVA]]:NEEDS[RackMountAdvanced]:BEFORE[RackMountConfig]
{
	//removes crew seats
	%CrewCapacity = 0

	//remove rackmountable modules
	-MODULE[ModuleCommand] {}
	-MODULE[ModuleDataTransmitter] {}
	-MODULE[ModuleSAS] {}
	-MODULE[ModuleReactionWheel] {}
	
	//removes resources
	-RESOURCE[ElectricCharge],* {}
	-RESOURCE[MonoPropellant],* {}
	
	//resets packed volume to mesh volume
	%MODULE[ModuleInventoryPart]
	{
		%packedVolumeLimit = 0
		%InventorySlots = 12
	}
	
	//changes ModuleCargoPart to a RM compatable version
	@MODULE[ModuleCargoPart]
	{
		%name = ModuleCargoPartRM
	}
	
	//adds the ability to rackmount parts
	MODULE
	{
		name = ModuleRackMount
		createPart = true
	}
}

@PART[*]:HAS[@MODULE[ModuleCommand],@MODULE[ModuleInventoryPart],!MODULE[ModuleRackMountPart],!MODULE[KerbalEVA]]:NEEDS[RackMountBasic]:BEFORE[RackMountConfig]
{
	@MODULE[ModuleInventoryPart]
	{
		@InventorySlots += 2
	}
	
	MODULE
	{
		name = ModuleRackMount
	}
}

@PART[*]:HAS[@MODULE[ModuleCommand],!MODULE[ModuleInventoryPart],!MODULE[ModuleRackMountPart],!MODULE[KerbalEVA]]:NEEDS[RackMountBasic]:BEFORE[RackMountConfig]
{
	MODULE
	{
		name = ModuleInventoryPart
		InventorySlots = 2
		packedVolumeLimit = 5
	}
	
	MODULE
	{
		name = ModuleRackMount
	}
	
	@MODULE[ModuleCargoPart]
	{
		%name = ModuleCargoPartRM
	}
}